
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1. Introduction &mdash; Doctrine MongoDB ODM v1.0.0-BETA2 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/configurationblock.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.0-BETA2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/configurationblock.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/configurationblock.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/configurationblock.js"></script>
    <link rel="top" title="Doctrine MongoDB ODM v1.0.0-BETA2 documentation" href="../index.html" />
    <link rel="next" title="2. Basic Mapping" href="basic-mapping.html" />
    <link rel="prev" title="Welcome to Doctrine MongoDB ODM’s documentation!" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="basic-mapping.html" title="2. Basic Mapping"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="Welcome to Doctrine MongoDB ODM’s documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="http://www.doctrine-project.org">Doctrine Homepage</a> &raquo;</li>
        <li><a href="../index.html">Doctrine MongoDB ODM v1.0.0-BETA2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="introduction">
<h1>1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>Doctrine MongoDB Object Document Mapper is built for PHP 5.3.0+ and
provides transparent persistence for PHP objects to the popular <a class="reference external" href="http://mongodb.org">MongoDB</a> database by <a class="reference external" href="http://www.10gen.com">10gen</a>.</p>
<div class="section" id="features-overview">
<h2>1.1. Features Overview<a class="headerlink" href="#features-overview" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Transparent persistence.</li>
<li>Map one or many embedded documents.</li>
<li>Map one or many referenced documents.</li>
<li>Create references between documents in different databases.</li>
<li>Map documents with Annotations, XML, YAML or plain old PHP code.</li>
<li>Documents can be stored on the <a class="reference external" href="http://www.php.net/MongoGridFS">MongoGridFS</a>.</li>
<li>Collection per class(concrete) and single collection inheritance supported.</li>
<li>Map your Doctrine 2 ORM Entities to the ODM and use mixed data stores.</li>
<li>Inserts are performed using <a class="reference external" href="http://us.php.net/manual/en/mongocollection.batchinsert.php">MongoCollection::batchInsert()</a></li>
<li>Updates are performed using atomic operators.</li>
</ul>
<p>Here is a quick example of some PHP object documents that demonstrates a few of the features:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="sd">/** @MappedSuperclass */</span>
<span class="k">abstract</span> <span class="k">class</span> <span class="nc">BaseEmployee</span>
<span class="p">{</span>
    <span class="sd">/** @Id */</span>
    <span class="k">private</span> <span class="nv">$id</span><span class="p">;</span>

    <span class="sd">/** @Increment */</span>
    <span class="k">private</span> <span class="nv">$changes</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="sd">/** @Collection */</span>
    <span class="k">private</span> <span class="nv">$notes</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

    <span class="sd">/** @String */</span>
    <span class="k">private</span> <span class="nv">$name</span><span class="p">;</span>

    <span class="sd">/** @Float */</span>
    <span class="k">private</span> <span class="nv">$salary</span><span class="p">;</span>

    <span class="sd">/** @Date */</span>
    <span class="k">private</span> <span class="nv">$started</span><span class="p">;</span>

    <span class="sd">/** @Date */</span>
    <span class="k">private</span> <span class="nv">$left</span><span class="p">;</span>

    <span class="sd">/** @EmbedOne(targetDocument=&quot;Address&quot;) */</span>
    <span class="k">private</span> <span class="nv">$address</span><span class="p">;</span>

    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="sd">/** @Document */</span>
<span class="k">class</span> <span class="nc">Employee</span> <span class="k">extends</span> <span class="nx">BaseEmployee</span>
<span class="p">{</span>
    <span class="sd">/** @ReferenceOne(targetDocument=&quot;Documents\Manager&quot;) */</span>
    <span class="k">private</span> <span class="nv">$manager</span><span class="p">;</span>

    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="sd">/** @Document */</span>
<span class="k">class</span> <span class="nc">Manager</span> <span class="k">extends</span> <span class="nx">BaseEmployee</span>
<span class="p">{</span>
    <span class="sd">/** @ReferenceMany(targetDocument=&quot;Documents\Project&quot;) */</span>
    <span class="k">private</span> <span class="nv">$projects</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="sd">/** @EmbeddedDocument */</span>
<span class="k">class</span> <span class="nc">Address</span>
<span class="p">{</span>
    <span class="sd">/** @String */</span>
    <span class="k">private</span> <span class="nv">$address</span><span class="p">;</span>

    <span class="sd">/** @String */</span>
    <span class="k">private</span> <span class="nv">$city</span><span class="p">;</span>

    <span class="sd">/** @String */</span>
    <span class="k">private</span> <span class="nv">$state</span><span class="p">;</span>

    <span class="sd">/** @String */</span>
    <span class="k">private</span> <span class="nv">$zipcode</span><span class="p">;</span>

    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="sd">/** @Document */</span>
<span class="k">class</span> <span class="nc">Project</span>
<span class="p">{</span>
    <span class="sd">/** @Id */</span>
    <span class="k">private</span> <span class="nv">$id</span><span class="p">;</span>

    <span class="sd">/** @String */</span>
    <span class="k">private</span> <span class="nv">$name</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">=</span> <span class="nv">$name</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now those objects can be used just like you weren&#8217;t using any
persistence layer at all and can be persisted transparently by
Doctrine:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$employee</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Employee</span><span class="p">();</span>
<span class="nv">$employee</span><span class="o">-&gt;</span><span class="na">setName</span><span class="p">(</span><span class="s1">&#39;Employee&#39;</span><span class="p">);</span>
<span class="nv">$employee</span><span class="o">-&gt;</span><span class="na">setSalary</span><span class="p">(</span><span class="mf">50000.00</span><span class="p">);</span>
<span class="nv">$employee</span><span class="o">-&gt;</span><span class="na">setStarted</span><span class="p">(</span><span class="k">new</span> <span class="nx">\DateTime</span><span class="p">());</span>

<span class="nv">$address</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Address</span><span class="p">();</span>
<span class="nv">$address</span><span class="o">-&gt;</span><span class="na">setAddress</span><span class="p">(</span><span class="s1">&#39;555 Doctrine Rd.&#39;</span><span class="p">);</span>
<span class="nv">$address</span><span class="o">-&gt;</span><span class="na">setCity</span><span class="p">(</span><span class="s1">&#39;Nashville&#39;</span><span class="p">);</span>
<span class="nv">$address</span><span class="o">-&gt;</span><span class="na">setState</span><span class="p">(</span><span class="s1">&#39;TN&#39;</span><span class="p">);</span>
<span class="nv">$address</span><span class="o">-&gt;</span><span class="na">setZipcode</span><span class="p">(</span><span class="s1">&#39;37209&#39;</span><span class="p">);</span>
<span class="nv">$employee</span><span class="o">-&gt;</span><span class="na">setAddress</span><span class="p">(</span><span class="nv">$address</span><span class="p">);</span>

<span class="nv">$project</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Project</span><span class="p">(</span><span class="s1">&#39;New Project&#39;</span><span class="p">);</span>
<span class="nv">$manager</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Manager</span><span class="p">();</span>
<span class="nv">$manager</span><span class="o">-&gt;</span><span class="na">setName</span><span class="p">(</span><span class="s1">&#39;Manager&#39;</span><span class="p">);</span>
<span class="nv">$manager</span><span class="o">-&gt;</span><span class="na">setSalary</span><span class="p">(</span><span class="mf">100000.00</span><span class="p">);</span>
<span class="nv">$manager</span><span class="o">-&gt;</span><span class="na">setStarted</span><span class="p">(</span><span class="k">new</span> <span class="nx">\DateTime</span><span class="p">());</span>
<span class="nv">$manager</span><span class="o">-&gt;</span><span class="na">addProject</span><span class="p">(</span><span class="nv">$project</span><span class="p">);</span>

<span class="nv">$dm</span><span class="o">-&gt;</span><span class="na">persist</span><span class="p">(</span><span class="nv">$employee</span><span class="p">);</span>
<span class="nv">$dm</span><span class="o">-&gt;</span><span class="na">persist</span><span class="p">(</span><span class="nv">$address</span><span class="p">);</span>
<span class="nv">$dm</span><span class="o">-&gt;</span><span class="na">persist</span><span class="p">(</span><span class="nv">$project</span><span class="p">);</span>
<span class="nv">$dm</span><span class="o">-&gt;</span><span class="na">persist</span><span class="p">(</span><span class="nv">$manager</span><span class="p">);</span>
<span class="nv">$dm</span><span class="o">-&gt;</span><span class="na">flush</span><span class="p">();</span>
</pre></div>
</div>
<p>The above would batch insert the following:</p>
<div class="highlight-python"><pre>Array
(
    [000000004b0a33690000000001c304c6] =&gt; Array
        (
            [name] =&gt; New Project
        )

)
Array
(
    [000000004b0a33660000000001c304c6] =&gt; Array
        (
            [changes] =&gt; 0
            [notes] =&gt; Array
                (
                )

            [name] =&gt; Manager
            [salary] =&gt; 100000
            [started] =&gt; MongoDate Object
                (
                    [sec] =&gt; 1275265048
                    [usec] =&gt; 0
                )

            [projects] =&gt; Array
                (
                    [0] =&gt; Array
                        (
                            [$ref] =&gt; projects
                            [$id] =&gt; 4c0300188ead0e947a000000
                            [$db] =&gt; my_db
                        )

                )

        )

)
Array
(
    [000000004b0a336a0000000001c304c6] =&gt; Array
        (
            [changes] =&gt; 0
            [notes] =&gt; Array
                (
                )

            [name] =&gt; Employee
            [salary] =&gt; 50000
            [started] =&gt; MongoDate Object
                (
                    [sec] =&gt; 1275265048
                    [usec] =&gt; 0
                )

            [address] =&gt; Array
                (
                    [address] =&gt; 555 Doctrine Rd.
                    [city] =&gt; Nashville
                    [state] =&gt; TN
                    [zipcode] =&gt; 37209
                )

        )

)</pre>
</div>
<p>If we update a property and call <tt class="docutils literal"><span class="pre">-&gt;flush()</span></tt> again we&#8217;ll get an
efficient update query using the atomic operators:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="nv">$newProject</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Project</span><span class="p">(</span><span class="s1">&#39;Another Project&#39;</span><span class="p">);</span>
<span class="nv">$manager</span><span class="o">-&gt;</span><span class="na">setSalary</span><span class="p">(</span><span class="mf">200000.00</span><span class="p">);</span>
<span class="nv">$manager</span><span class="o">-&gt;</span><span class="na">addNote</span><span class="p">(</span><span class="s1">&#39;Gave user 100k a year raise&#39;</span><span class="p">);</span>
<span class="nv">$manager</span><span class="o">-&gt;</span><span class="na">incrementChanges</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="nv">$manager</span><span class="o">-&gt;</span><span class="na">addProject</span><span class="p">(</span><span class="nv">$newProject</span><span class="p">);</span>

<span class="nv">$dm</span><span class="o">-&gt;</span><span class="na">persist</span><span class="p">(</span><span class="nv">$newProject</span><span class="p">);</span>
<span class="nv">$dm</span><span class="o">-&gt;</span><span class="na">flush</span><span class="p">();</span>
</pre></div>
</div>
<p>The above could would produce an update that looks something like
this:</p>
<div class="highlight-python"><pre>Array
(
    [$inc] =&gt; Array
        (
            [changes] =&gt; 2
        )

    [$pushAll] =&gt; Array
        (
            [notes] =&gt; Array
                (
                    [0] =&gt; Gave user 100k a year raise
                )

            [projects] =&gt; Array
                (
                    [0] =&gt; Array
                        (
                            [$ref] =&gt; projects
                            [$id] =&gt; 4c0310718ead0e767e030000
                            [$db] =&gt; my_db
                        )

                )

        )

    [$set] =&gt; Array
        (
            [salary] =&gt; 200000
        )

)</pre>
</div>
<p>This is a simple example but it demonstrates well that you can
transparently persist PHP objects while still utilizing the the
atomic operators for updating documents! Continue reading to learn
how to get the Doctrine MongoDB Object Document Mapper setup and
running!</p>
</div>
<div class="section" id="setup">
<h2>1.2. Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>Before we can begin setting up the code we need to download the
Doctrine MongoDB package. You can learn about how to download the
code <a class="reference external" href="http://www.doctrine-project.org/projects/mongodb_odm/download">here</a>.
The easiest way is to just clone it using git:</p>
<div class="highlight-python"><pre>$ mkdir doctrine-mongodb-odm-test
$ cd doctrine-mongodb-odm-test
$ git clone git://github.com/doctrine/mongodb-odm.git lib/vendor/doctrine-mongodb-odm
$ cd lib/vendor/doctrine-mongodb-odm
$ git submodule init
$ git submodule update</pre>
</div>
<p>Now that we have the code, we can begin our setup. First in a file named <tt class="docutils literal"><span class="pre">bootstrap.php`</span>
<span class="pre">bootstrap</span> <span class="pre">file</span> <span class="pre">you</span> <span class="pre">need</span> <span class="pre">to</span> <span class="pre">require</span> <span class="pre">the</span> <span class="pre">``ClassLoader</span></tt> from the
<tt class="docutils literal"><span class="pre">Doctrine\Common</span></tt> namespace which is included in the vendor
libraries:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// doctrine-mongodb-odm-test/bootstrap.php</span>

<span class="k">require</span> <span class="s1">&#39;lib/vendor/doctrine-mongodb-odm/lib/vendor/doctrine-common/lib/Doctrine/Common/ClassLoader.php&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>At the top of your bootstrap file you need to tell PHP which namespaces you want to use:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// ...</span>

<span class="k">use</span> <span class="nx">Doctrine\Common\ClassLoader</span><span class="p">,</span>
    <span class="nx">Doctrine\Common\Annotations\AnnotationReader</span><span class="p">,</span>
    <span class="nx">Doctrine\ODM\MongoDB\DocumentManager</span><span class="p">,</span>
    <span class="nx">Doctrine\MongoDB\Connection</span><span class="p">,</span>
    <span class="nx">Doctrine\ODM\MongoDB\Configuration</span><span class="p">,</span>
    <span class="nx">Doctrine\ODM\MongoDB\Mapping\Driver\AnnotationDriver</span><span class="p">;</span>
</pre></div>
</div>
<p>Next we need to setup the <tt class="docutils literal"><span class="pre">ClassLoader</span></tt> instances for all of the classes we need to autoload:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// ...</span>

<span class="c1">// ODM Classes</span>
<span class="nv">$classLoader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ClassLoader</span><span class="p">(</span><span class="s1">&#39;Doctrine\ODM\MongoDB&#39;</span><span class="p">,</span> <span class="s1">&#39;lib/vendor/doctrine-mongodb-odm/lib&#39;</span><span class="p">);</span>
<span class="nv">$classLoader</span><span class="o">-&gt;</span><span class="na">register</span><span class="p">();</span>

<span class="c1">// Common Classes</span>
<span class="nv">$classLoader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ClassLoader</span><span class="p">(</span><span class="s1">&#39;Doctrine\Common&#39;</span><span class="p">,</span> <span class="s1">&#39;lib/vendor/doctrine-mongodb-odm/lib/vendor/doctrine-common/lib&#39;</span><span class="p">);</span>
<span class="nv">$classLoader</span><span class="o">-&gt;</span><span class="na">register</span><span class="p">();</span>

<span class="c1">// MongoDB Classes</span>
<span class="nv">$classLoader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ClassLoader</span><span class="p">(</span><span class="s1">&#39;Doctrine\MongoDB&#39;</span><span class="p">,</span> <span class="s1">&#39;lib/vendor/doctrine-mongodb-odm/lib/vendor/doctrine-mongodb/lib&#39;</span><span class="p">);</span>
<span class="nv">$classLoader</span><span class="o">-&gt;</span><span class="na">register</span><span class="p">();</span>

<span class="c1">// Document classes</span>
<span class="nv">$classLoader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ClassLoader</span><span class="p">(</span><span class="s1">&#39;Documents&#39;</span><span class="p">,</span> <span class="nx">__DIR__</span><span class="p">);</span>
<span class="nv">$classLoader</span><span class="o">-&gt;</span><span class="na">register</span><span class="p">();</span>
</pre></div>
</div>
<p>Now we can configure the ODM and create our <tt class="docutils literal"><span class="pre">DocumentManager</span></tt> instance:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// ...</span>

<span class="nv">$config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Configuration</span><span class="p">();</span>
<span class="nv">$config</span><span class="o">-&gt;</span><span class="na">setProxyDir</span><span class="p">(</span><span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/cache&#39;</span><span class="p">);</span>
<span class="nv">$config</span><span class="o">-&gt;</span><span class="na">setProxyNamespace</span><span class="p">(</span><span class="s1">&#39;Proxies&#39;</span><span class="p">);</span>

<span class="nv">$config</span><span class="o">-&gt;</span><span class="na">setHydratorDir</span><span class="p">(</span><span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/cache&#39;</span><span class="p">);</span>
<span class="nv">$config</span><span class="o">-&gt;</span><span class="na">setHydratorNamespace</span><span class="p">(</span><span class="s1">&#39;Hydrators&#39;</span><span class="p">);</span>

<span class="nv">$reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AnnotationReader</span><span class="p">();</span>
<span class="nv">$reader</span><span class="o">-&gt;</span><span class="na">setDefaultAnnotationNamespace</span><span class="p">(</span><span class="s1">&#39;Doctrine\ODM\MongoDB\Mapping\\&#39;</span><span class="p">);</span>
<span class="nv">$config</span><span class="o">-&gt;</span><span class="na">setMetadataDriverImpl</span><span class="p">(</span><span class="k">new</span> <span class="nx">AnnotationDriver</span><span class="p">(</span><span class="nv">$reader</span><span class="p">,</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/Documents&#39;</span><span class="p">));</span>

<span class="nv">$dm</span> <span class="o">=</span> <span class="nx">DocumentManager</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="k">new</span> <span class="nx">Connection</span><span class="p">(),</span> <span class="nv">$config</span><span class="p">);</span>
</pre></div>
</div>
<p>Your final bootstrap code should look like the following:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// doctrine-mongodb-odm-test/bootstrap.php</span>

<span class="k">require</span> <span class="s1">&#39;lib/vendor/doctrine-mongodb-odm/lib/vendor/doctrine-common/lib/Doctrine/Common/ClassLoader.php&#39;</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Doctrine\Common\ClassLoader</span><span class="p">,</span>
    <span class="nx">Doctrine\Common\Annotations\AnnotationReader</span><span class="p">,</span>
    <span class="nx">Doctrine\ODM\MongoDB\DocumentManager</span><span class="p">,</span>
    <span class="nx">Doctrine\MongoDB\Connection</span><span class="p">,</span>
    <span class="nx">Doctrine\ODM\MongoDB\Configuration</span><span class="p">,</span>
    <span class="nx">Doctrine\ODM\MongoDB\Mapping\Driver\AnnotationDriver</span><span class="p">;</span>

<span class="c1">// ODM Classes</span>
<span class="nv">$classLoader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ClassLoader</span><span class="p">(</span><span class="s1">&#39;Doctrine\ODM\MongoDB&#39;</span><span class="p">,</span> <span class="s1">&#39;lib/vendor/doctrine-mongodb-odm/lib&#39;</span><span class="p">);</span>
<span class="nv">$classLoader</span><span class="o">-&gt;</span><span class="na">register</span><span class="p">();</span>

<span class="c1">// Common Classes</span>
<span class="nv">$classLoader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ClassLoader</span><span class="p">(</span><span class="s1">&#39;Doctrine\Common&#39;</span><span class="p">,</span> <span class="s1">&#39;lib/vendor/doctrine-mongodb-odm/lib/vendor/doctrine-common/lib&#39;</span><span class="p">);</span>
<span class="nv">$classLoader</span><span class="o">-&gt;</span><span class="na">register</span><span class="p">();</span>

<span class="c1">// MongoDB Classes</span>
<span class="nv">$classLoader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ClassLoader</span><span class="p">(</span><span class="s1">&#39;Doctrine\MongoDB&#39;</span><span class="p">,</span> <span class="s1">&#39;lib/vendor/doctrine-mongodb-odm/lib/vendor/doctrine-mongodb/lib&#39;</span><span class="p">);</span>
<span class="nv">$classLoader</span><span class="o">-&gt;</span><span class="na">register</span><span class="p">();</span>

<span class="c1">// Document classes</span>
<span class="nv">$classLoader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ClassLoader</span><span class="p">(</span><span class="s1">&#39;Documents&#39;</span><span class="p">,</span> <span class="nx">__DIR__</span><span class="p">);</span>
<span class="nv">$classLoader</span><span class="o">-&gt;</span><span class="na">register</span><span class="p">();</span>

<span class="nv">$config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Configuration</span><span class="p">();</span>
<span class="nv">$config</span><span class="o">-&gt;</span><span class="na">setProxyDir</span><span class="p">(</span><span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/cache&#39;</span><span class="p">);</span>
<span class="nv">$config</span><span class="o">-&gt;</span><span class="na">setProxyNamespace</span><span class="p">(</span><span class="s1">&#39;Proxies&#39;</span><span class="p">);</span>

<span class="nv">$config</span><span class="o">-&gt;</span><span class="na">setHydratorDir</span><span class="p">(</span><span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/cache&#39;</span><span class="p">);</span>
<span class="nv">$config</span><span class="o">-&gt;</span><span class="na">setHydratorNamespace</span><span class="p">(</span><span class="s1">&#39;Hydrators&#39;</span><span class="p">);</span>

<span class="nv">$reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AnnotationReader</span><span class="p">();</span>
<span class="nv">$reader</span><span class="o">-&gt;</span><span class="na">setDefaultAnnotationNamespace</span><span class="p">(</span><span class="s1">&#39;Doctrine\ODM\MongoDB\Mapping\\&#39;</span><span class="p">);</span>
<span class="nv">$config</span><span class="o">-&gt;</span><span class="na">setMetadataDriverImpl</span><span class="p">(</span><span class="k">new</span> <span class="nx">AnnotationDriver</span><span class="p">(</span><span class="nv">$reader</span><span class="p">,</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/Documents&#39;</span><span class="p">));</span>

<span class="nv">$dm</span> <span class="o">=</span> <span class="nx">DocumentManager</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="k">new</span> <span class="nx">Connection</span><span class="p">(),</span> <span class="nv">$config</span><span class="p">);</span>
</pre></div>
</div>
<p>That is it! Your <tt class="docutils literal"><span class="pre">DocumentManager</span></tt> instance is ready to be used!</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">1. Introduction</a><ul>
<li><a class="reference internal" href="#features-overview">1.1. Features Overview</a></li>
<li><a class="reference internal" href="#setup">1.2. Setup</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="../index.html"
                                  title="previous chapter">Welcome to Doctrine MongoDB ODM&#8217;s documentation!</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="basic-mapping.html"
                                  title="next chapter">2. Basic Mapping</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/reference/introduction.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="basic-mapping.html" title="2. Basic Mapping"
             >next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="Welcome to Doctrine MongoDB ODM’s documentation!"
             >previous</a> |</li>
        <li><a href="http://www.doctrine-project.org">Doctrine Homepage</a> &raquo;</li>
        <li><a href="../index.html">Doctrine MongoDB ODM v1.0.0-BETA2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2010, Doctrine Project Team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>